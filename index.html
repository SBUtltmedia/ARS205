
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-Frame 3D Model Showcase</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script>
        AFRAME.registerComponent('clickable-link', {
          schema: {
            href: {default: ''}
          },
          init: function () {
            this.el.addEventListener('click', (evt) => {
              if (this.data.href) {
                window.location.href = this.data.href;
              }
            });
          }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const models = [
                "glb/Shuo_Xi.glb",
                "glb/Leslie_Omana.glb",
                "glb/Kai_Solomon.glb",
                "glb/Isaac_Mendoza_Pineda.glb",
                "glb/Ella_Giannetta.glb"
            ];

            const scene = document.querySelector('a-scene');
            const assets = document.querySelector('a-assets');
            const modelsPerRow = 2;
            const xSpacing = 6;
            const zSpacing = -4;
            const startX = -3;
            const startZ = -3;

            models.forEach((modelFile, index) => {
                // Create asset item
                const asset = document.createElement('a-asset-item');
                asset.setAttribute('id', `model${index}`);
                asset.setAttribute('src', modelFile);
                assets.appendChild(asset);

                // Create model entity
                const row = Math.floor(index / modelsPerRow);
                const col = index % modelsPerRow;
                const x = startX + col * xSpacing;
                const z = startZ + row * zSpacing;

                const modelName = modelFile.replace('glb/', '').replace('.glb', '');
                const arPageUrl = `ar_${modelName}.html`;

                const container = document.createElement('a-entity');
                container.setAttribute('position', { x, y: 1.5, z });
                container.setAttribute('clickable-link', `href: ${arPageUrl}`);
                container.setAttribute('geometry', 'primitive: box; width: 4; height: 4; depth: 4');
                container.setAttribute('material', 'visible: false');

                const modelEntity = document.createElement('a-entity');
                modelEntity.setAttribute('gltf-model', `#model${index}`);
                modelEntity.setAttribute('scale', '0.5 0.5 0.5');
                modelEntity.setAttribute('animation', {
                    property: 'rotation',
                    to: '0 360 0',
                    dur: 10000,
                    easing: 'linear',
                    loop: true
                });

                const textEntity = document.createElement('a-text');
                textEntity.setAttribute('text', {
                    value: modelName.replace(/_/g, ' '),
                    align: 'center',
                    color: '#000'
                });
                textEntity.setAttribute('position', '0 -1 0');

                container.appendChild(modelEntity);
                container.appendChild(textEntity);
                scene.appendChild(container);
            });
        });
    </script>
</head>
<body>
    <a-scene background="color: #ECECEC">
        <a-assets></a-assets>

        <a-camera>
            <a-cursor></a-cursor>
            <a-text
                value="Click on a 3D scan model to go to its page."
                position="0 1.4 -2"
                color="#000"
                width="4"
                align="center">
            </a-text>
            <a-text
                value="Use WASD buttons to navigate the gallery"
                position="0 -1.4 -2"
                color="#000"
                width="4"
                align="center">
            </a-text>
        </a-camera>

        <a-sky color="#ADD8E6"></a-sky>

        <a-light type="ambient" color="#888"></a-light>
        <a-light type="directional" intensity="0.5" position="-1 1 2"></a-light>

    </a-scene>
</body>
</html>